@inherits BadActorBaseComponent;

<style>
    .distributor.new {
        cursor: pointer;
    }
</style>

@if (Distributor == null)
{
    <div class="distributor new" @onclick="@newViralDistributor">
        <span class="mdi mdi-plus"> New</span>
    </div>
}
else
{
    @Distributor.Name
    <br />

    @foreach (ViralVector vector in Distributor.DistributedVectors)
    {
        <span class="distributor @getDistributedVectorClass(vector)"></span>
    }
}

@code {
    [Inject]
    IModalService modalService { get; set; }

    [Parameter]
    public ViralDistributor Distributor { get; set; }

    private string getDistributedVectorClass(ViralVector vector)
    {
        return vector.Icon +
            (vector.Unlocked ? "" : " locked");
    }

    private void newViralDistributor()
    {
        modalService.Show<NewViralDistributor>("Purchase new viral distributor");
    }
}
