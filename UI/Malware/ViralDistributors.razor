@inherits BadActorBaseComponent;

<style>
    .viralDistributor > span {
        margin-top: .75em;
    }
</style>

<div id="ViralDistributorsContainer" class="purple">
    <h4 class="@ViralDistributor.TypeIcon"> distributors</h4>

    @foreach (ViralDistributor distributor in ViralDistributor.List)
    {
        <div class="viralDistributor horizontalListItem">
            <ViralDistributorListItem Distributor="@distributor" />
        </div>
    }

    <div class="viralDistributor horizontalListItem">
        <ViralDistributorListItem />
    </div>
</div>

@code {

    public void RedrawNeeded(Type filter)
    {
        if (filter != null && !(filter.Equals(typeof(ViralDistributor))
            || !(filter.Equals(typeof(ViralVector)))))
        {
            return;
        }

        StateHasChanged();
    }

    protected override async Task OnInitializedAsync()
    {
        appState.RedrawNeeded += RedrawNeeded;
    }
}
