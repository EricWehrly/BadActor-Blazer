@inject AppState appState;

<style>
    #ApplicationsContainer {
        left: .5em;
        position: absolute;
        top: 50%;
        /* Translate up by 50%? */
    }

        #ApplicationsContainer .application {
            padding: .5em;
            cursor: grab;
        }

    #ApplicationsContainer .application:active {
        cursor: grabbing;
    }

    #ApplicationsContainer > .btn {
        margin-bottom: 1em;
    }
</style>

<!-- Is it possible to retrieve the value of Collapsed from the component, and write the compute here? -->
<CollapsibleMenu MenuName="Applications" MenuNameShort="Apps" MenuIcon="mdi mdi-application"
                 MenuClasses="green" HandleClasses="green">
    @foreach (Application application in Application.List)
    {
        <div class="application" draggable="true"
             @ondragstart="@(e => ApplicationDragStart(application))" @ondragend="@ApplicationDragEnd">
            <span class="@applicationClass"> @application.Name</span>
        </div>
    }
</CollapsibleMenu>

@code {

    // We may later want to suppress the icon while we're dragging
    private string applicationClass = "mdi mdi-application";

    private void ApplicationDragStart(Application application)
    {
        appState.ApplicationBeingDragged = application;
    }

    private void ApplicationDragEnd()
    {
        appState.ApplicationBeingDragged = null;
    }
}
